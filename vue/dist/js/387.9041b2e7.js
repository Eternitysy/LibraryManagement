"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[387],{4387:function(e,o,t){t.r(o),t.d(o,{default:function(){return u}});var r=function(){var e=this,o=e._self._c;return o("div",{staticStyle:{width:"100%"}},[e._m(0),o("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"图书编号",prop:"bookNo"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择图书编号"},on:{change:e.selBook},model:{value:e.form.bookNo,callback:function(o){e.$set(e.form,"bookNo",o)},expression:"form.bookNo"}},e._l(e.books,(function(e){return o("el-option",{key:e.id,attrs:{label:e.bookNo,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"书名",prop:"bookName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.bookName,callback:function(o){e.$set(e.form,"bookName",o)},expression:"form.bookName"}})],1),o("el-form-item",{attrs:{label:"所需积分",prop:"score"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.score,callback:function(o){e.$set(e.form,"score",o)},expression:"form.score"}})],1),o("el-form-item",{attrs:{label:"图书数量",prop:"score"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.nums,callback:function(o){e.$set(e.form,"nums",o)},expression:"form.nums"}})],1),o("br"),o("el-form-item",{attrs:{label:"用户ID",prop:"userId"}},[o("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择用户ID"},on:{change:e.selUser},model:{value:e.form.userId,callback:function(o){e.$set(e.form,"userId",o)},expression:"form.userId"}},e._l(e.users,(function(e){return o("el-option",{key:e.id,attrs:{label:e.cardID,value:e.id}})})),1)],1),o("el-form-item",{attrs:{label:"用户姓名",prop:"userName"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.userName,callback:function(o){e.$set(e.form,"userName",o)},expression:"form.userName"}})],1),o("el-form-item",{attrs:{label:"用户联系电话",prop:"userPhone"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.userPhone,callback:function(o){e.$set(e.form,"userPhone",o)},expression:"form.userPhone"}})],1),o("el-form-item",{attrs:{label:"用户账户余额",prop:"account"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.account,callback:function(o){e.$set(e.form,"account",o)},expression:"form.account"}})],1)],1),o("div",{staticStyle:{"text-align":"center","margin-top":"40px"}},[o("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.save}},[e._v("提交")])],1)],1)},s=[function(){var e=this,o=e._self._c;return o("div",{staticStyle:{padding:"0 20px"}},[o("h3",[e._v("新增借阅")])])}],a=t(5067),l={name:"AddBorrow",data(){const e=(e,o,t)=>{/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(o)||t(new Error("该手机号不合法")),t()};return{form:{},books:[],users:[],rules:{name:[{required:!0,message:"请输入书名",trigger:"blur"}],phone:[{validator:e,trigger:"blur"}]}}},created(){a.A.get("/book/list").then((e=>{this.books=e.data})),a.A.get("/user/list").then((e=>{this.users=e.data}))},methods:{save(){this.$refs["ruleForm"].validate((e=>{e&&a.A.post("/borrow/save",this.form).then((e=>{"200"==e.code?(this.$notify.success("借书成功"),this.$refs["ruleForm"].resetFields()):this.$notify.error(e.msg)}))}))},selBook(){const e=this.books.find((e=>e.bookNo=this.form.bookNo));log.print(e),a.A.get("/book/"+e.id).then((e=>{this.$set(this.form,"bookName",e.data.name),this.form.score=e.data.score,this.form.nums=e.data.nums}))},selUser(){const e=this.users.find((e=>e.cardID=this.form.userId));a.A.get("/user/"+e.id).then((e=>{this.$set(this.form,"userName",e.data.name),this.form.userPhone=e.data.phone,this.form.account=e.data.account}))}}},i=l,n=t(1656),m=(0,n.A)(i,r,s,!1,null,"2a933cb3",null),u=m.exports}}]);
//# sourceMappingURL=387.9041b2e7.js.map