"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[487],{2487:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});a(4114);var l=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"35px","margin-top":"30px"}},[e("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入名称"},model:{value:t.params.name,callback:function(e){t.$set(t.params,"name",e)},expression:"params.name"}}),e("el-input",{staticStyle:{width:"240px","margin-left":"5px"},attrs:{placeholder:"请输入联系方式"},model:{value:t.params.phone,callback:function(e){t.$set(t.params,"phone",e)},expression:"params.phone"}}),e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:t.load}},[e("i",{staticClass:"el-icon-search"}),t._v(" 搜索")]),e("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"warning"},on:{click:t.reset}},[e("i",{staticClass:"el-icon-refresh"}),t._v(" 重置")])],1),e("el-table",{attrs:{data:t.tableData,stripe:""}},[e("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),e("el-table-column",{attrs:{prop:"cardID",label:"卡号"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),e("el-table-column",{attrs:{prop:"age",label:"年龄",width:"70"}}),e("el-table-column",{attrs:{prop:"sex",label:"性别",width:"70"}}),e("el-table-column",{attrs:{prop:"address",label:"地址"}}),e("el-table-column",{attrs:{prop:"phone",label:"联系方式"}}),e("el-table-column",{attrs:{prop:"account",label:"账户积分"}}),e("el-table-column",{attrs:{prop:"createtime",label:"创建时间"}}),e("el-table-column",{attrs:{prop:"updatetime",label:"更新时间"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex"}},[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.handleAccount(a.row)}}},[t._v("充值")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push("/editUser?id="+a.row.id)}}},[t._v("编辑")]),e("el-popconfirm",{staticStyle:{"margin-left":"14px"},attrs:{"confirm-button-text":"YES","cancel-button-text":"NO",icon:"el-icon-info",title:"是否确定删除该行数据"},on:{confirm:function(e){return t.del(a.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("删除")])],1)],1)]}}])})],1),e("div",{staticStyle:{"margin-top":"20px"}},[e("el-pagination",{attrs:{background:"",current:t.params.pageNumber,"page-size":t.params.pageSize,layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChanged}})],1),e("el-dialog",{attrs:{title:"充值",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{ref:"ruleForm",staticStyle:{width:"85%"},attrs:{model:t.form,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"当前账户积分",prop:"account"}},[e("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),e("el-form-item",{attrs:{label:"充值积分",prop:"score"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.score,callback:function(e){t.$set(t.form,"score",e)},expression:"form.score"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addAccount}},[t._v("充 值")])],1)],1)],1)},r=[],o=a(5067),s={name:"User",data(){const t=(t,e,a)=>{/^[0-9]+$/.test(e)||a(new Error("请输入正整数值")),(parseInt(e)>200||parseInt(e)<10)&&a(new Error("请输入10-200间的整数")),a()};return{tableData:[],total:0,params:{pageNumber:1,pageSize:10,name:"",phone:"",account:"15"},dialogFormVisible:!1,form:{},rules:{score:[{validator:t,trigger:"blur"}]}}},created(){this.load()},methods:{load(){o.A.get("/user/page",{params:this.params}).then((t=>{"200"==t.code&&(this.tableData=t.data.list,this.total=t.data.total)}))},reset(){this.params={pageNumber:1,pageSize:10,name:"",phone:"",account:"15"},this.load()},del(t){o.A.delete("/user/delete/"+t).then((t=>{"200"==t.code?(this.$notify.success("删除成功"),this.load()):this.$notify.error(t.msg)}))},handleCurrentChanged(t){this.params.pageNumber=t,this.load()},handleAccount(t){this.form=JSON.parse(JSON.stringify(t)),this.dialogFormVisible=!0},addAccount(){this.$refs["ruleForm"].validate((t=>{t&&o.A.post("/user/account",this.form).then((t=>{"200"==t.code?(this.$notify.success("充值成功"),this.dialogFormVisible=!1,this.load()):this.$notify.error(t.msg)}))}))}}},i=s,n=a(1656),c=(0,n.A)(i,l,r,!1,null,null,null),p=c.exports}}]);
//# sourceMappingURL=487.a4717edb.js.map