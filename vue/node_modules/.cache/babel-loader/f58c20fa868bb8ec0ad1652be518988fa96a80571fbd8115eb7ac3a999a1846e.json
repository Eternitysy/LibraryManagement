{"ast":null,"code":"import Cookies from \"js-cookie\";\nimport request from \"@/utils/request\";\nimport * as echarts from 'echarts';\nconst option = {\n  title: {\n    text: '图书借还统计'\n  },\n  tooltip: {\n    trigger: 'axis'\n  },\n  legend: {\n    data: ['借书数量', '还书数量']\n  },\n  grid: {\n    left: '3%',\n    right: '4%',\n    bottom: '3%',\n    containLabel: true\n  },\n  toolbox: {\n    feature: {\n      saveAsImage: {}\n    }\n  },\n  xAxis: {\n    type: 'category',\n    boundaryGap: false,\n    data: [] //从后台动态获取\n  },\n  yAxis: {\n    type: 'value'\n  },\n  series: [{\n    name: '借书数量',\n    type: 'line',\n    stack: 'Total',\n    data: [] //从后台动态获取\n  }, {\n    name: '还书数量',\n    type: 'line',\n    stack: 'Total',\n    data: [] //从后台动态获取\n  }]\n};\nexport default {\n  name: 'HomeView',\n  data() {\n    return {\n      admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n      lineBox: null,\n      timeRange: 'week',\n      options: [{\n        label: '最近一周',\n        value: 'week'\n      }, {\n        label: '最近一个月',\n        value: 'month'\n      }, {\n        label: '最近两个月',\n        value: 'month2'\n      }, {\n        label: '最近三个月',\n        value: 'month3'\n      }]\n    };\n  },\n  mounted() {\n    //等页面元素全部初始化好\n    this.load();\n  },\n  created() {\n    //console.log(JSON.parse(Cookies.get('admin')))\n    request.get('/admin/' + this.admin.id).then(res => {\n      this.admin = res.data;\n    });\n  },\n  methods: {\n    load() {\n      if (!this.lineBox) {\n        this.lineBox = echarts.init(document.getElementById(\"line\")); //初始化echarts容器\n      }\n      //从后台获取数据\n      request.get('/borrow/lineCharts/' + this.timeRange).then(res => {\n        option.xAxis.data = res.data.date;\n        option.series[0].data = res.data.borrow;\n        option.series[1].data = res.data.returns;\n        this.lineBox.setOption(option);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Cookies","request","echarts","option","title","text","tooltip","trigger","legend","data","grid","left","right","bottom","containLabel","toolbox","feature","saveAsImage","xAxis","type","boundaryGap","yAxis","series","name","stack","admin","get","JSON","parse","lineBox","timeRange","options","label","value","mounted","load","created","id","then","res","methods","init","document","getElementById","date","borrow","returns","setOption"],"sources":["src/views/home/HomeView.vue"],"sourcesContent":["<template>\n  <div>\n<!--      <div class=\"item\">用户名：{{admin.username}}</div>-->\n<!--      <div class=\"item\">手机号：{{admin.phone}}</div>-->\n<!--      <div class=\"item\">邮箱：{{admin.email}}</div>-->\n\n  </div>\n  <el-card>\n      <div id=\"line\" style=\"width: 100%;height: 400px\"></div>\n  </el-card>\n</template>\n\n<script>\n\nimport Cookies from \"js-cookie\";\nimport request from \"@/utils/request\";\nimport * as echarts from 'echarts'\n\nconst option = {\n    title: {\n        text: '图书借还统计'\n    },\n    tooltip: {\n        trigger: 'axis'\n    },\n    legend: {\n        data: ['借书数量', '还书数量']\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    toolbox: {\n        feature: {\n            saveAsImage: {}\n        }\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: [] //从后台动态获取\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series: [\n        {\n            name: '借书数量',\n            type: 'line',\n            stack: 'Total',\n            data: [] //从后台动态获取\n        },\n        {\n            name: '还书数量',\n            type: 'line',\n            stack: 'Total',\n            data: [] //从后台动态获取\n        },\n\n    ]\n};\n\nexport default {\n  name: 'HomeView',\n    data(){\n      return {\n          admin: Cookies.get('admin') ? JSON.parse(Cookies.get('admin')) : {},\n          lineBox: null,\n          timeRange:'week',\n          options: [\n              {label:'最近一周',value:'week'},\n              {label:'最近一个月',value:'month'},\n              {label:'最近两个月',value:'month2'},\n              {label:'最近三个月',value:'month3'},\n          ]\n\n      }\n    },\n    mounted(){ //等页面元素全部初始化好\n      this.load()\n    },\n    created() {\n      //console.log(JSON.parse(Cookies.get('admin')))\n        request.get('/admin/'+this.admin.id).then(res=>{\n            this.admin=res.data\n        })\n    },\n    methods:{\n      load(){\n          if(!this.lineBox){\n              this.lineBox=echarts.init(document.getElementById(\"line\")) //初始化echarts容器\n          }\n          //从后台获取数据\n          request.get('/borrow/lineCharts/'+this.timeRange).then(res=>{\n              option.xAxis.data=res.data.date\n              option.series[0].data=res.data.borrow\n              option.series[1].data=res.data.returns\n              this.lineBox.setOption(option)\n          })\n      }\n\n    }\n}\n</script>\n\n<style>\n.item{\n    margin: 10px 0;\n    color: #666;\n}\n</style>"],"mappings":"AAcA,OAAAA,OAAA;AACA,OAAAC,OAAA;AACA,YAAAC,OAAA;AAEA,MAAAC,MAAA;EACAC,KAAA;IACAC,IAAA;EACA;EACAC,OAAA;IACAC,OAAA;EACA;EACAC,MAAA;IACAC,IAAA;EACA;EACAC,IAAA;IACAC,IAAA;IACAC,KAAA;IACAC,MAAA;IACAC,YAAA;EACA;EACAC,OAAA;IACAC,OAAA;MACAC,WAAA;IACA;EACA;EACAC,KAAA;IACAC,IAAA;IACAC,WAAA;IACAX,IAAA;EACA;EACAY,KAAA;IACAF,IAAA;EACA;EACAG,MAAA,GACA;IACAC,IAAA;IACAJ,IAAA;IACAK,KAAA;IACAf,IAAA;EACA,GACA;IACAc,IAAA;IACAJ,IAAA;IACAK,KAAA;IACAf,IAAA;EACA;AAGA;AAEA;EACAc,IAAA;EACAd,KAAA;IACA;MACAgB,KAAA,EAAAzB,OAAA,CAAA0B,GAAA,YAAAC,IAAA,CAAAC,KAAA,CAAA5B,OAAA,CAAA0B,GAAA;MACAG,OAAA;MACAC,SAAA;MACAC,OAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA;IAGA;EACA;EACAC,QAAA;IAAA;IACA,KAAAC,IAAA;EACA;EACAC,QAAA;IACA;IACAnC,OAAA,CAAAyB,GAAA,kBAAAD,KAAA,CAAAY,EAAA,EAAAC,IAAA,CAAAC,GAAA;MACA,KAAAd,KAAA,GAAAc,GAAA,CAAA9B,IAAA;IACA;EACA;EACA+B,OAAA;IACAL,KAAA;MACA,UAAAN,OAAA;QACA,KAAAA,OAAA,GAAA3B,OAAA,CAAAuC,IAAA,CAAAC,QAAA,CAAAC,cAAA;MACA;MACA;MACA1C,OAAA,CAAAyB,GAAA,8BAAAI,SAAA,EAAAQ,IAAA,CAAAC,GAAA;QACApC,MAAA,CAAAe,KAAA,CAAAT,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,CAAAmC,IAAA;QACAzC,MAAA,CAAAmB,MAAA,IAAAb,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,CAAAoC,MAAA;QACA1C,MAAA,CAAAmB,MAAA,IAAAb,IAAA,GAAA8B,GAAA,CAAA9B,IAAA,CAAAqC,OAAA;QACA,KAAAjB,OAAA,CAAAkB,SAAA,CAAA5C,MAAA;MACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}